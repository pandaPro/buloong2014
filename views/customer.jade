extends layout

block menu
    include includes/profile-menu
    +menu('menu.customer')
block js
    script(src='/javascripts/controllers/customer.js')
    script(src='/javascripts/controllers/common-directives.js')
block content
    div.container(ng-controller="customerController" )
        div.row-fluid.table-responsive
            input(type="text" class="input-lg text-center" placeholder=t("customer.enterName"))
            label.pull-right {{ list.length }}
            hr
            table(class="table table-striped")
                thead
                    tr
                        th= t("customer.name")
                        th= t("customer.address")
                        th= t("customer.phone")
                        th= t("customer.status")
                        th
                tbody
                    tr(ng-hide="editorEnabled" ng-repeat="customer in list")
                        td {{customer.name}}
                        td {{customer.address}}
                        td {{customer.phone}}
                        td
                            {{customer.status}}
                            -if('#{customer.status}' == 'true')
                                div.alert.alert-success=t("actived")
                            -else
                                div.alert.alert-danger=t("blocked")
                        td
                            p
                                button(ng-click="edit(customer._id)" type="button" class="btn btn-primary")=t("button.edit")
                                span &nbsp;
                                button(type="button" class="btn btn-danger")=t("button.delete")
                    tr(ng-show="editorEnabled")
                        td
                            input(type="text" class="form-control input-lg text-center" required placeholder=t("customer.enterName") ng-model="editCustomer.name" )
                            span(ng-show="editCustomer.name.$error.required")=t("validation.required")
                        td
                            input(type="text" name="editCustomer.address" class="form-control input-lg text-center" placeholder=t("customer.enterAddress") ng-model="editCustomer.address")
                        td
                            input(type="text" name="editCustomer.phone" valid-number class="form-control input-lg text-center" required placeholder=t("customer.enterPhone") ng-model="editCustomer.phone" ng-minlength="8" ng-maxlength="30")
                            span(class="error" ng-show="editCustomer.phone.$dirty && editCustomer.phone.$invalid")=t("validation.number")
                            span(ng-show="editCustomer.phone.$error.required")=t("validation.required")
                        td
                            input(type="checkbox" text=t("customer.status") checked="{{editCustomer.status}}")
                        td
                            p
                                button(type="button" class="btn btn-primary" ng-click="update(editCustomer)")
                                    span(class="glyphicon glyphicon-ok")
                                span &nbsp;
                                button(type="button" class="btn btn-default" ng-click="cancel()")
                                    span(class="glyphicon glyphicon-remove")

        hr
        div( id="messages" ng-show="message") {{ message }}
        form(name="customerModel" novalidate )
            div.row
                h2=t("customer.customerInfo")
                div(class="form-group" ng-class="{ 'has-error' : customerModel.name.$invalid && !customerModel.name.$pristine }")
                    input(type="text" name="name" class="form-control input-lg text-center" required placeholder=t("customer.enterName") ng-model="newCustomer.name")
                    span(class="help-block" ng-show="customerModel.name.$error.required")=t("validation.required")
                div.form-group
                    input(type="text" class="form-control input-lg text-center" placeholder=t("customer.enterAddress") ng-model="newCustomer.address")
                div.form-group(ng-class="{ 'has-error' : customerModel.phone.$invalid && !customerModel.phone.$pristine }")
                    input(type="text" name="phone" valid-number class="form-control input-lg text-center" placeholder=t("customer.enterPhone") ng-model="newCustomer.phone" ng-minlength="8" ng-maxlength="30")
                    span(class="help-block" ng-show="customerModel.phone.$dirty && customerModel.phone.$invalid")=t("validation.number")
                    span(class="help-block" ng-show="customerModel.phone.$error.required")=t("validation.required")
                .form-group
                    label.control-label(for='checkboxes')=t("customer.status")
                      .col-md-4
                        label.checkbox-inline(for='checkboxe-status')
                            input#checkboxe-status(type="checkbox" ng-model="newCustomer.status")
                div.control-group
                    input(type="submit" class="btn btn-primary btn-lg" 
                    ng-click="createCustomer(customerModel)" ng-disabled="customerModel.$invalid")=t("button.add")